# https://taskfile.dev

# wasm

# only need:
# wasmtime - https://github.com/bytecodealliance/wasmtime for inspeection
# wazero - for pure go
# tinygo - for pure go


version: "3"

vars:
  WASM_BIN_NAME: go
  WASM_BIN_WHICH:
    sh: 'command -v {{.WASM_BIN_NAME}}'
  WASM_BIN_VERSION:
    sh: "{{.WASM_BIN_NAME}} version"
tasks:
  default:
    desc: go print
    cmds:
      - echo ''
      - echo '- bin'
      - echo 'WASM_BIN_NAME:'       {{.WASM_BIN_NAME}}
      - echo "WASM_BIN_WHICH:"      {{.WASM_BIN_WHICH}}
      - echo "WASM_BIN_VERSION:"    {{.WASM_BIN_VERSION}}

      - echo ""
      - echo "- env"

      - echo ""
      - echo "- var"
    silent: true

  bin:
    desc: wasm build
    cmds:
      - echo ""
      - echo "bin"
      - cd {{.BASE_SRC}} && {{.WASM_BIN_NAME}} build -o {{.BASE_BIN}}/{{.BASE_SRC_NAME}}
      - echo ""
   