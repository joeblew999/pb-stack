# https://taskfile.dev

# github - gh

version: '3'

vars:
  
  # https://github.com/cli/cli
  # https://github.com/cli/cli/releases/tag/v2.69.0
  GH_BIN_NAME: cli
  GH_BIN_VERSION: v2.69.0


tasks:
  default:
    cmds:
      - echo ""
      - echo "GH_BIN_NAME:"           {{.GH_BIN_NAME}}
      - echo "GH_BIN_VERSION:"        {{.GH_BIN_VERSION}}
      - echo ""
    silent: true

  dep:
    desc: install gh
    cmds:
      - task base:dep
      - echo ""
      - echo "- gh dep"
      - env GOBIN={{.BASE_DEP}} {{.GO_BIN_NAME}} install github.com/pocketbase/pocketbase/examples/base@{{.PB_BIN_VERSION}}
      - mv {{.BASE_DEP}}/base {{.BASE_DEP}}/{{.PB_BIN_NAME}}
      - echo ""
      - echo "- pb gen dep"
      - env GOBIN={{.BASE_DEP}} {{.GO_BIN_NAME}} install github.com/snonky/pocketbase-gogen@{{.PB_GEN_BIN_VERSION}}
      - mv {{.BASE_DEP}}/pocketbase-gogen {{.BASE_DEP}}/{{.PB_GEN_BIN_NAME}}
  run:
    cmds:
      - '{{.PB_BIN_NAME}} -h'

 